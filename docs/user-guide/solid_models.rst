===================
Making Solid Models
===================


Pure solid model (explicitly descritezed sandwich panels) 
=========================================================

Pure solid models can be made in Sierra SM, Sierra SD or Abaqus.
Currenly only SD is partially supported since it does not allow for 
spatially varying material orientations. 

Continuous meshes in Sierra
----------------------------

#. The first step is to make a Genesis mesh file and the associated files with
   :py:func:`~pynumad.analysis.cubit.make_blade.cubit_make_solid_blade`. This 
   will create the following file

      * {wt_name}.g. Genesis mesh file. 

#. The next step is to Compute material orientation with 
   :py:func:`~pynumad.analysis.cubit.make_blade.compute_material_orientations`

#. Next, the orientation data needs to be assigned with 
   :py:func:`~pynumad.analysis.cubit.make_blade.assign_material_orientations`

#. Finally, the mesh needs to be exported in Genisis format
   .. code-block:: python
      cubit.cmd(f'export mesh "{wt_name}.g" overwrite')


#. Make the Sierra SM input files with :py:func:`~pynumad.analysis.make_models.write_sierra_sm_model`. 

   This creates the following file:

      * sm.i : Sierra SM input file

    Be sure to have ran the following import statement

    .. code-block:: python

       from pynumad.analysis.make_models import write_sierra_sm_model


#. AND/OR Make the Sierra SD input files with :py:func:`~pynumad.analysis.make_models.write_sierra_sd_model`. 

   This creates the following files:

      * sd.i: Sierra SD input file

    Be sure to have ran the following import statement

    .. code-block:: python

       from pynumad.analysis.make_models import write_sierra_sd_model


#. Finally run Sierra SM with: launch -n 10 adagio -i sm.i, where n is the 
   number of CPUs.

#. AND/OR run Sierra SD with: launch -n 10 salinas -i sd.i, where n is the 
   number of CPUs.

An example called `cubit_solid.py` exists in the examples folder.

Discontinuous meshes in Abaqus
------------------------------

The example pyNuMAD/examples/write_abaqus_solid_model.py generates a fully solid element model input file in Abaqus format, which can be imported and analyzed using Abaqus CAE.  With the ih-house mesher, the shear webs and adhesive are tied to the blade outer shell with nodal constraint equations.  These are included in the model input file generated by this example.

Layered solid model (homogenized sandwich panels)
==================================================

This capability does not yet exist.


